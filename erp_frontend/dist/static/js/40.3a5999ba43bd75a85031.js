webpackJsonp([40],{O4bL:function(e,t,n){var r=n("uvzB");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("rjj0")("4f3a3f1e",r,!0)},SfdS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("wtDQ"),a=(n("UM7R"),n("FWz8"));function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";this.order_number=e,this.merchant_number=t,this.merchant_name=n,this.order_time=r,this.status=a,this.remark=o}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.order_number=e,this.merchant_number=t,this.merchant_name=n,this.status=r}var i={order_number:[{required:!0,message:"请填写订单",trigger:"blur"}],merchant_number:[{required:!0,message:"请填写商户编号",trigger:"blur"}]},s=n("2uFj"),c=n("TvqX"),u={name:"order_index",mixins:[r.a],data:function(){return{searchForm:new l,form:new o,rules:i,searchModel:l,model:o,tools:c.a,showMenu:!1,curd:{getInfo:a.getInfo||function(){},getInfoById:a.getInfoById||function(){},updateInfo:a.updateInfo||function(){},addInfo:a.addInfo||function(){},deleteInfoById:a.deleteInfoById||function(){},deleteAll:a.deleteAll||function(){}},searchSelect:"order_number",searchContent:"",types:["无"],templateFile:s.a.site+"/xls/config.xlsx",goods:[],getIndex:null,editDialogFormVisible:!1,currentRecord:null,product_count:0,sum_amount:0,sum_remain:0}},created:function(){this.fetchData()},computed:{summary:function(){return this.product_count?"当前订单有产品 <span>"+this.product_count+" </span>类,  合计 <span>"+this.sum_amount+" </span>件商品,  已经发送 <span>"+(this.sum_amount-this.sum_remain)+" </span>件,  还剩<span>"+this.sum_remain+"</span>件未发送":""}},filters:{filterOrderTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},filterStatus:function(e){return["","未发","已发未完","已发完"][e]}},methods:{showContent:function(e){this.$router.push({path:"/order/"+e+"/products"})},showPackage:function(e){this.$router.push({path:"/order/"+e+"/package"})},editMenuHandle:function(e){this.edit({id:this.currentRecord})},deleteHandle:function(){this.del({id:this.currentRecord},"删除订单，将删除订单对应的所有产品和包裹信息，是否继续")},find:function(e){var t=this;this.$nextTick().then(function(){t.fetchData()})},dblHandle:function(e,t,n){this.edit(e)},rowHandle:function(e,t,n){this.getIndex=e.index,this.getSummary(e.id)},getSummary:function(e){var t=this;Object(a.getSummaryById)(e).then(function(e){var n=e.data,r=n.product_count,a=n.sum_amount,o=n.sum_remain;t.product_count=r,t.sum_amount=a,t.sum_remain=o})},contextHandle:function(e,t,n){this.getIndex=e.index,this.currentRecord=e.id,this.getSummary(e.id)},tableRowClassName:function(e){var t=e.row,n=e.rowIndex;t.index=n},selectedHighlight:function(e){e.row;var t=e.rowIndex;if(this.getIndex===t)return{"background-color":"#CAE1ff"}},testMenu:function(){console.log("test")}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"config"}},[n("el-form",{staticClass:"demo-form-inline",attrs:{id:"toolbar",inline:!0,model:e.searchForm}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"请输入订单编号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.find(t)}},model:{value:e.searchForm.order_number,callback:function(t){e.$set(e.searchForm,"order_number",t)},expression:"searchForm.order_number"}})],1),e._v(" "),n("el-form-item",[n("el-input",{attrs:{type:"text",placeholder:"请输入商户编号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.find(t)}},model:{value:e.searchForm.merchant_number,callback:function(t){e.$set(e.searchForm,"merchant_number",t)},expression:"searchForm.merchant_number"}})],1),e._v(" "),n("el-form-item",[n("el-input",{attrs:{type:"text",placeholder:"请输入商户名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.find(t)}},model:{value:e.searchForm.merchant_name,callback:function(t){e.$set(e.searchForm,"merchant_name",t)},expression:"searchForm.merchant_name"}})],1),e._v(" "),n("el-form-item",[n("el-select",{attrs:{clearable:"",placeholder:"请选择订单状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[n("el-option",{attrs:{label:"未发",value:"1"}}),e._v(" "),n("el-option",{attrs:{label:"已发未完",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"已发完",value:"3"}})],1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{plain:""},on:{click:function(t){e.find()}}},[e._v("查询")]),e._v(" "),n("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.findReset()}}},[e._v("重置")])],1)],1),e._v(" "),n("div",{attrs:{id:"datagrid"}},[n("div",{staticClass:"toolbar"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{plain:"",icon:"el-icon-plus"},on:{click:function(t){e.add()}}},[e._v("添加订单信息")])],1),e._v(" "),n("el-col",{attrs:{span:18}},[n("p",{staticClass:"tips",domProps:{innerHTML:e._s(e.summary)}})])],1)],1),e._v(" "),n("el-table",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"mini",data:e.tableData,"row-class-name":e.tableRowClassName,"row-style":e.selectedHighlight,border:""},on:{"row-contextmenu":e.contextHandle,"row-dblclick":e.dblHandle,"row-click":e.rowHandle,"select-all":e.selectChange,"selection-change":e.selectChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"订单编号",prop:"order_number",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{label:"商户编号",prop:"merchant_number",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{label:"商户名称",prop:"merchant_name",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"购买时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("filterOrderTime")(t.row.order_time)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"订单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[3===t.row.status?n("el-tag",{attrs:{type:"success"}},[e._v(e._s(e._f("filterStatus")(t.row.status)))]):e._e(),e._v(" "),1===t.row.status?n("el-tag",{attrs:{type:"danger"}},[e._v(e._s(e._f("filterStatus")(t.row.status)))]):e._e(),e._v(" "),2===t.row.status?n("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._f("filterStatus")(t.row.status)))]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"备注",prop:"remark",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{content:"编辑",placement:"right-end",effect:"light"}},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"cates.show",expression:"'cates.show'"}],attrs:{plain:"",icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(n){e.edit(t.row)}}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"显示产品",placement:"right-end",effect:"light"}},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"cates.show",expression:"'cates.show'"}],attrs:{plain:"",icon:"el-icon-view",type:"primary",size:"small"},on:{click:function(n){e.showContent(t.row.id)}}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"删除",placement:"right-end",effect:"light"}},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:"cates.destory",expression:"'cates.destory'"}],attrs:{plain:"",icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){e.del(t.row,"删除订单，将删除订单对应的所有产品和包裹信息，是否继续")}}})],1)]}}])})],1),e._v(" "),n("el-row",{staticClass:"page"},[n("el-col",{attrs:{span:2,offset:1}}),e._v(" "),n("el-col",{attrs:{span:20}},[n("el-pagination",{attrs:{background:"","current-page":e.current_page,"page-sizes":[10,20,25,50],layout:"total,sizes,prev, pager, next","page-size":e.pageSize,total:e.total},on:{"current-change":e.pagination,"size-change":e.sizeChange,"update:currentPage":function(t){e.current_page=t},"update:pageSize":function(t){e.pageSize=t}}})],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"订单管理",center:"",visible:e.editDialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"订单编号",prop:"order_number"}},[n("el-input",{attrs:{disabled:!0===e.isEdit,placeholder:"请输入订单编号"},model:{value:e.form.order_number,callback:function(t){e.$set(e.form,"order_number",t)},expression:"form.order_number"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"商户编号",prop:"merchant_number"}},[n("el-input",{attrs:{placeholder:"请输入商户编号"},model:{value:e.form.merchant_number,callback:function(t){e.$set(e.form,"merchant_number",t)},expression:"form.merchant_number"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"商户名称"}},[n("el-input",{attrs:{placeholder:"请输入商户名称"},model:{value:e.form.merchant_name,callback:function(t){e.$set(e.form,"merchant_name",t)},expression:"form.merchant_name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"订单日期"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.order_time,callback:function(t){e.$set(e.form,"order_time",t)},expression:"form.order_time"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){e.cancel()}}},[e._v("取 消")])],1)],1),e._v(" "),n("v-contextmenu",{ref:"contextmenu"},[n("v-contextmenu-item",{on:{click:e.add}},[e._v("新增订单")]),e._v(" "),n("v-contextmenu-item",{attrs:{divider:!0}}),e._v(" "),n("v-contextmenu-item",{on:{click:e.editMenuHandle}},[e._v("修改订单")]),e._v(" "),n("v-contextmenu-item",{on:{click:e.deleteHandle}},[e._v("删除定单")]),e._v(" "),n("v-contextmenu-item",{attrs:{divider:!0}}),e._v(" "),n("v-contextmenu-item",{on:{click:function(t){e.showContent(e.currentRecord)}}},[e._v("产品列表")]),e._v(" "),n("v-contextmenu-item",{on:{click:function(t){e.showPackage(e.currentRecord)}}},[e._v("包裹管理")])],1)],1)},staticRenderFns:[]};var d=n("VU/8")(u,m,!1,function(e){n("O4bL")},null,null);t.default=d.exports},uvzB:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n#toolbar {\n  background-color: #e8e8e8 !important;\n  margin-bottom: 5px;\n}\n#toolbar .el-form-item {\n    margin-bottom: 5px;\n    margin-top: 5px;\n    margin-left: 5px;\n}\n#datagrid {\n  border: 1px solid #ddd;\n  padding-bottom: 5px;\n}\n#datagrid .toolbar {\n    padding-left: 5px;\n    margin-bottom: 5px;\n    margin-top: 5px;\n}\n#datagrid .page {\n    margin-top: 5px;\n    height: 40px;\n}\n#datagrid .page .el-col-2 {\n      text-align: center;\n      min-width: 120px;\n      height: 100%;\n}\n#datagrid .page .el-col-20 {\n      line-height: 40px;\n      height: 100%;\n}\n#datagrid .page .el-col-20 .el-pagination {\n        padding: 0;\n        margin-top: 5px;\n        text-align: center;\n}\n#datagrid .toolbar {\n  margin-bottom: 10px;\n}\n#datagrid .toolbar .tips {\n    line-height: 40px;\n    height: 40px;\n    margin: 0px;\n    padding: 0px 10px;\n}\n#datagrid .page {\n  margin-top: 10px;\n}\n.el-button--mini.is-round,\n.toolbar-config .el-button--mini {\n  padding: 10px;\n}\n.toolbar-config .el-button + .el-button {\n  margin-left: 5px;\n}\n.tips span {\n  color: #f44;\n}\n",""])}});