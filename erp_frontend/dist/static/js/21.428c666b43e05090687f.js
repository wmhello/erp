webpackJsonp([21],{"526x":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n#toolbar {\n  background-color: #e8e8e8 !important;\n  margin-bottom: 5px;\n}\n#toolbar .el-form-item {\n    margin-bottom: 5px;\n    margin-top: 5px;\n    margin-left: 5px;\n}\n#datagrid {\n  border: 1px solid #ddd;\n  padding-bottom: 5px;\n}\n#datagrid .toolbar {\n    padding-left: 5px;\n    margin-bottom: 5px;\n    margin-top: 5px;\n}\n#datagrid .page {\n    margin-top: 5px;\n    height: 40px;\n}\n#datagrid .page .el-col-2 {\n      text-align: center;\n      min-width: 120px;\n      height: 100%;\n}\n#datagrid .page .el-col-20 {\n      line-height: 40px;\n      height: 100%;\n}\n#datagrid .page .el-col-20 .el-pagination {\n        padding: 0;\n        margin-top: 5px;\n        text-align: center;\n}\n#config .el-input {\n  width: 100%;\n  margin-left: 10px;\n}\n#config .el-input-number {\n  width: 90%;\n  margin-left: 10px;\n}\n#datagrid .toolbar {\n  margin-bottom: 10px;\n}\n#datagrid .toolbar .tips {\n    line-height: 40px;\n    height: 40px;\n    margin: 0;\n    padding: 0 10px;\n}\n#datagrid .toolbar .tips span {\n      color: #f44;\n}\n#datagrid .page {\n  margin-top: 10px;\n}\n#package .toolbar {\n  margin-bottom: 10px;\n}\n#package .toolbar .tips {\n    line-height: 40px;\n    height: 40px;\n    margin: 0;\n    padding: 0 10px;\n}\n#package .toolbar .tips span {\n      color: #f44;\n}\n#package .page {\n  margin-top: 10px;\n}\n.el-button--mini.is-round,\n.toolbar-config .el-button--mini {\n  padding: 10px;\n}\n.toolbar-config .el-button + .el-button {\n  margin-left: 5px;\n}\n",""])},"9bBU":function(t,e,n){n("mClu");var r=n("FeBl").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},"GH/e":function(t,e,n){var r=n("526x");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("29f82d2e",r,!0)},SldL:function(t,e){!function(e){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof t,s=e.regeneratorRuntime;if(s)u&&(t.exports=s);else{(s=e.regeneratorRuntime=u?t.exports:{}).wrap=y;var d="suspendedStart",p="suspendedYield",h="executing",f="completed",m={},g={};g[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(E([])));b&&b!==r&&a.call(b,i)&&(g=b);var _=I.prototype=x.prototype=Object.create(g);k.prototype=_.constructor=I,I.constructor=k,I[c]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,I):(t.__proto__=I,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(_),t},s.awrap=function(t){return{__await:t}},O(j.prototype),j.prototype[l]=function(){return this},s.AsyncIterator=j,s.async=function(t,e,n,r){var a=new j(y(t,e,n,r));return s.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},O(_),_[c]="Generator",_[i]=function(){return this},_.toString=function(){return"[object Generator]"},s.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=E,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,a){return l.type="throw",l.arg=t,e.next=r,a&&(e.method="next",e.arg=n),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;L(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function y(t,e,n,r){var a=e&&e.prototype instanceof x?e:x,o=Object.create(a.prototype),i=new R(r||[]);return o._invoke=function(t,e,n){var r=d;return function(a,o){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw o;return T()}for(n.method=a,n.arg=o;;){var i=n.delegate;if(i){var l=S(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=w(t,e,n);if("normal"===c.type){if(r=n.done?f:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(t,n,i),o}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function I(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,i){var l=w(t[n],t,r);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):Promise.resolve(u).then(function(t){c.value=t,o(c)},i)}i(l.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function S(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,S(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=w(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,m;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(a.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},UgCr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInfo=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments[3];return Object(o.a)({url:i.product_baseUrl,method:"get",params:{id:n,page:t,pageSize:e}})},e.getInfoById=function(t){return Object(o.a)({url:i.product_baseUrl+"/"+t,method:"get"})},e.updateInfo=function(t,e){"string"==typeof e.buy_date?e.buy_date=Math.ceil(Date.parse(e.buy_date)/1e3):e.buy_date=Math.ceil(e.buy_date.getTime()/1e3);return Object(o.a)({url:i.product_baseUrl+"/"+t,method:"PATCH",data:e})},e.deleteInfoById=function(t){return Object(o.a)({url:i.product_baseUrl+"/"+t,method:"delete"})},e.addInfo=function(t){return console.log(a()(t.buy_date)),t.buy_date=Math.ceil(t.buy_date.getTime()/1e3),Object(o.a)({url:i.product_baseUrl,method:"post",data:t})},e.deleteAll=function(t){return Object(o.a)({url:i.product_baseUrl+"/deleteAll",method:"post",data:{ids:t}})};var r=n("pFYg"),a=n.n(r),o=n("Vo7i"),i=n("P9l9")},Xxa5:function(t,e,n){t.exports=n("jyFz")},bOdI:function(t,e,n){"use strict";e.__esModule=!0;var r,a=n("C4MV"),o=(r=a,r&&r.__esModule?r:{default:r});e.default=function(t,e,n){return e in t?(0,o.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},corQ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),o=n("exGp"),i=n.n(o),l=n("bOdI"),c=n.n(l),u=n("UgCr"),s=n("FWz8"),d=n("dPTl");function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.logistics_number=t,this.logistics_date=e,this.items=n,this.remark=r}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.logistics_number=t,this.logistics_date=e}var f={logistics_number:[{required:!0,message:"请填写订单编号",trigger:"blur"}],logistics_date:[{required:!0,message:"请填写订单日期",trigger:"blur"}]},m=(n("2uFj"),n("TvqX")),g={name:"order_package",data:function(){return c()({searchForm:new h,form:new p,rules:f,searchModel:h,model:p,tools:m.a,getIndex:null,currentRecord:null,routeId:null,packageId:null,tableData:[],packageData:[],editDialogFormVisible:!1,detailsTableVisible:!1,uploadId:"",loading:!1,isNew:!1,isEdit:!1,current_page:1,total:0,pageSize:10,order_number:null,merchant_name:"",merchant_number:"",product_count:0,sum_amount:0,sum_remain:0,package:{current_page:1,total:null,pageSize:10},detailsInfo:[],enableProducts:[],multipleSelection:[],isRemark:!1,packageRemark:null},"packageId",null)},filters:{filterOrderTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},filterLogisticsDate:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},computed:{summary:function(){return this.order_number?"订单编号： <span>"+this.order_number+" </span>,  商家编号: <span>"+this.merchant_number+" </span>,  商家名称： <span>"+this.merchant_name+" </span>":""},packageSummary:function(){return this.product_count?"当前订单有产品 <span>"+this.product_count+" </span>类,  合计 <span>"+this.sum_amount+" </span>件商品,  已经发送 <span>"+(this.sum_amount-this.sum_remain)+" </span>件,  还剩<span>"+this.sum_remain+"</span>件未发送":""}},beforeRouteEnter:function(t,e,n){n(function(t){})},created:function(){this.routeId=this.$route.params.id},mounted:function(){this.getTipsInfo(),this.fetchData()},methods:{saveRemark:function(){var t=this;return i()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.isRemark=!1,Object(d.addRemark)(t.packageId,t.packageRemark),t.tools.success(t,"备注信息添加成功"),t.fetchData(),t.getPackagesByOrderId();case 5:case"end":return e.stop()}},e,t)}))()},addRemark:function(t){this.packageId=t,this.packageRemark="",this.isRemark=!0},handleSelectionChange:function(t){this.multipleSelection=t},save:function(){var t=this;if(0===this.multipleSelection.length)return this.$message.error("添加包裹失败,请选择对应的产品数量后再添加"),!1;this.$refs.ruleForm.validate(function(e){if(!e)return!1;t.editDialogFormVisible=!1;t.multipleSelection.forEach(function(e){var n={order_id:e.order_id,product_amount:e.value,product_id:e.id,package_id:null};t.form.items.push(n)}),Object(d.addInfo)(t.form).then(function(e){t.tools.success(t,"功能信息添加成功"),t.fetchData()}).catch(function(e){t.tools.error(t,e.response.data)})})},add:function(){var t=this;Object(s.getEnableProductsById)(this.routeId).then(function(e){var n=e.data;n=n.map(function(t){return t.value=1,t.remain_amount=parseInt(t.remain_amount),t}),t.form=new p,t.enableProducts=n,t.editDialogFormVisible=!0})},showMenuHandle:function(){this.show()},deleteHandle:function(){var t=this.packageId;this.del(t)},del:function(t){var e=this;this.$confirm("此操作将永久删除该包裹, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.deleteInfoById)(t).then(function(t){e.fetchData()}),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=e||this.packageId,Object(d.getPackageInfoById)(e).then(function(e){t.detailsInfo=e.data,t.detailsTableVisible=!0}).catch(function(t){})},dblHandle:function(t,e,n){var r=this;Object(d.getPackageInfoById)(t.package_id).then(function(t){r.detailsInfo=t.data,r.detailsTableVisible=!0}).catch(function(t){})},rowHandle:function(t,e,n){this.getIndex=t.index},contextHandle:function(t,e,n){this.getIndex=t.index,this.packageId=t.package_id},tableRowClassName:function(t){var e=t.row,n=t.rowIndex;e.index=n},selectedHighlight:function(t){t.row;var e=t.rowIndex;if(this.getIndex===e)return{"background-color":"#CAE1ff"}},getTipsInfo:function(){var t=this;Object(s.getInfoById)(this.routeId).then(function(e){var n=e.data,r=n.order_number,a=n.merchant_name,o=n.merchant_number;t.order_number=r,t.merchant_name=a,t.merchant_number=o}),Object(s.getSummaryById)(this.routeId).then(function(e){var n=e.data,r=n.product_count,a=n.sum_amount,o=n.sum_remain;t.product_count=r,t.sum_amount=a,t.sum_remain=o})},showProduct:function(){this.$router.push({path:"/order/"+this.routeId+"/products"})},showContent:function(){this.$router.push({path:"/order/index"})},fetchData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.searchForm,e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.current_page,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pageSize;this.loading=!0,Object(u.getInfo)(t,n,r,this.routeId).then(function(t){if("function"==typeof e.listHandle)e.listHandle(t);else{var n=t.data;e.tableData=n}e.total=t.meta.total,e.loading=!1}).catch(function(t){e.tools.error(e,t.response.data),e.loading=!1}),Object(d.getPackagesByOrderId)(this.routeId).then(function(t){e.packageData=t.data}).catch(function(t){}),this.getTipsInfo()},pagination:function(t){this.current_page=t,this.fetchData()},sizeChange:function(t){this.pageSize=t,this.fetchData()},packagePagination:function(t){this.package.current_page=t},packageSizeChange:function(t){this.package.pageSize=t}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"config"}},[n("div",{attrs:{id:"datagrid"}},[n("div",{staticClass:"toolbar"}),t._v(" "),n("el-table",{directives:[{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"mini",data:t.tableData,border:"",height:"250"}},[n("el-table-column",{attrs:{label:"产品编号",prop:"product_number",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"产品名称",prop:"product_name",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"产品图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{display:"block",width:"80px",height:"60px"},attrs:{src:t.row.product_img}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"购买数量",prop:"product_amount",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"未发货数量",prop:"remain_amount",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"购买日期",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("filterOrderTime")(e.row.buy_date)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1),t._v(" "),n("el-row",{staticClass:"page"},[n("el-col",{attrs:{span:2,offset:1}}),t._v(" "),n("el-col",{attrs:{span:20}},[n("el-pagination",{attrs:{background:"","current-page":t.current_page,"page-sizes":[10,20,25,50],layout:"total,sizes,prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.pagination,"size-change":t.sizeChange,"update:currentPage":function(e){t.current_page=e},"update:pageSize":function(e){t.pageSize=e}}})],1)],1)],1),t._v(" "),n("v-contextmenu",{ref:"contextmenu"},[n("v-contextmenu-item",{on:{click:t.add}},[t._v("分割包裹")]),t._v(" "),n("v-contextmenu-item",{attrs:{divider:!0}}),t._v(" "),n("v-contextmenu-item",{on:{click:t.showProduct}},[t._v("返回产品")]),t._v(" "),n("v-contextmenu-item",{on:{click:t.showContent}},[t._v("返回订单")])],1),t._v(" "),n("v-contextmenu",{ref:"packageOperation"},[n("v-contextmenu-item",{on:{click:t.add}},[t._v("分割包裹")]),t._v(" "),n("v-contextmenu-item",{on:{click:t.showMenuHandle}},[t._v("显示包裹")]),t._v(" "),n("v-contextmenu-item",{on:{click:t.deleteHandle}},[t._v("删除包裹")]),t._v(" "),n("v-contextmenu-item",{attrs:{divider:!0}}),t._v(" "),n("v-contextmenu-item",{on:{click:t.showProduct}},[t._v("返回产品")]),t._v(" "),n("v-contextmenu-item",{on:{click:t.showContent}},[t._v("返回订单")])],1),t._v(" "),n("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"package"}},[n("div",{staticClass:"toolbar"},[n("el-row",[n("el-col",{attrs:{span:6}}),t._v(" "),n("el-col",{attrs:{span:18}},[n("p",{staticClass:"tips",domProps:{innerHTML:t._s(t.summary)}}),t._v(" "),n("p",{staticClass:"tips",domProps:{innerHTML:t._s(t.packageSummary)}})])],1)],1),t._v(" "),n("el-table",{directives:[{name:"contextmenu",rawName:"v-contextmenu:packageOperation",arg:"packageOperation"}],attrs:{data:t.packageData,border:"",height:"550","row-class-name":t.tableRowClassName,"row-style":t.selectedHighlight},on:{"row-contextmenu":t.contextHandle,"row-dblclick":t.dblHandle,"row-click":t.rowHandle}},[n("el-table-column",{attrs:{label:"包裹标识",prop:"package_id",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"物流编号",prop:"logistics_number",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"物流日期",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("filterLogisticsDate")(e.row.logistics_date)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"产品信息",prop:"info",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{label:"备注",prop:"remark",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{content:"显示包裹",placement:"right-end",effect:"light"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-view",type:"primary",size:"small"},on:{click:function(n){t.show(e.row.package_id)}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"增加备注",placement:"right-end",effect:"light"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-document",type:"primary",size:"small"},on:{click:function(n){t.addRemark(e.row.package_id)}}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"删除包裹",placement:"right-end",effect:"light"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(n){t.del(e.row.package_id)}}})],1)]}}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"备注信息",visible:t.isRemark,width:"30%"},on:{"update:visible":function(e){t.isRemark=e}}},[n("el-input",{attrs:{placeholder:"请输入包裹的备注信息"},model:{value:t.packageRemark,callback:function(e){t.packageRemark=e},expression:"packageRemark"}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.isRemark=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.saveRemark}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"包裹信息",visible:t.detailsTableVisible},on:{"update:visible":function(e){t.detailsTableVisible=e}}},[n("el-table",{attrs:{data:t.detailsInfo}},[n("el-table-column",{attrs:{property:"product_number",label:"产品编号",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{property:"product_name",label:"产品名称",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"产品图象",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.product_img}})]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"product_amount",label:"数量",width:"100"}})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"添加包裹信息",width:"60%",visible:t.editDialogFormVisible},on:{"update:visible":function(e){t.editDialogFormVisible=e}}},[n("el-table",{attrs:{data:t.enableProducts,size:"mini",border:"",heigth:"250"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{label:"选择数量",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{attrs:{min:1,max:e.row.remain_amount,label:"描述文字"},model:{value:e.row.value,callback:function(n){t.$set(e.row,"value",n)},expression:"scope.row.value"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"可分配数量",width:"100",prop:"remain_amount"}}),t._v(" "),n("el-table-column",{attrs:{property:"product_number",label:"产品编号",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{property:"product_name",label:"产品名称",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"产品图象"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{width:"50px",height:"40px"},attrs:{src:t.row.product_img}})]}}])})],1),t._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("el-col",{attrs:{span:22,offset:2}},[n("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"",prop:"logistics_number"}},[n("el-input",{attrs:{placeholder:"物流编号"},model:{value:t.form.logistics_number,callback:function(e){t.$set(t.form,"logistics_number",e)},expression:"form.logistics_number"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"",prop:"logistics_date"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"日期"},model:{value:t.form.logistics_date,callback:function(e){t.$set(t.form,"logistics_date",e)},expression:"form.logistics_date"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"success"},on:{click:t.save}},[t._v("添加包裹")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=n("VU/8")(g,v,!1,function(t){n("GH/e")},null,null);e.default=b.exports},dPTl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInfo=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments[3];return Object(o.a)({url:i.package_baseUrl,method:"get",params:{id:n,page:t,pageSize:e}})},e.getInfoById=function(t){return Object(o.a)({url:i.package_baseUrl+"/"+t,method:"get"})},e.updateInfo=function(t,e){"string"==typeof e.order_time?e.order_time=Math.ceil(Date.parse(e.order_time)/1e3):e.order_time=Math.ceil(e.order_time.getTime()/1e3);return Object(o.a)({url:i.package_baseUrl+"/"+t,method:"PATCH",data:e})},e.deleteInfoById=function(t){return Object(o.a)({url:i.package_baseUrl+"/"+t,method:"delete"})},e.addInfo=function(t){return t.logistics_date=Math.ceil(t.logistics_date.getTime()/1e3),Object(o.a)({url:i.package_baseUrl,method:"post",data:a()(t),headers:{"Content-Type":"application/json"}})},e.addRemark=function(t,e){return Object(o.a)({url:i.package_baseUrl+"/"+t+"/remark",method:"post",data:{remark:e}})},e.deleteAll=function(t){return Object(o.a)({url:i.package_baseUrl+"/deleteAll",method:"post",data:{ids:t}})},e.getPackagesByOrderId=function(t){return Object(o.a)({url:"/api/orders/"+t+"/packages",method:"get"})},e.getPackageInfoById=function(t){return Object(o.a)({url:"/api/packages/"+t+"/info",method:"get"})};var r=n("mvHQ"),a=n.n(r),o=n("Vo7i"),i=n("P9l9")},exGp:function(t,e,n){"use strict";e.__esModule=!0;var r,a=n("//Fk"),o=(r=a,r&&r.__esModule?r:{default:r});e.default=function(t){return function(){var e=t.apply(this,arguments);return new o.default(function(t,n){return function r(a,i){try{var l=e[a](i),c=l.value}catch(t){return void n(t)}if(!l.done)return o.default.resolve(c).then(function(t){r("next",t)},function(t){r("throw",t)});t(c)}("next")})}}},jyFz:function(t,e,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n("SldL"),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},mClu:function(t,e,n){var r=n("kM2E");r(r.S+r.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})}});